{% extends 'base.html' %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<div class="dashboard-container">
    <h1>Welcome, {{ session['user_email'] }}</h1>
    <p class="info">Allowed file types: <strong>PDF, DOCX, TXT</strong></p>

    <!-- File Upload Section -->
    <section class="upload-section">
        <form action="{{ url_for('dashboard.dashboard') }}" method="post" enctype="multipart/form-data">
            <label for="file" class="file-label">Choose Files:</label>
            <input type="file" id="file" name="file" accept=".pdf, .docx, .txt" multiple required class="file-input">
            <button type="submit" class="upload-btn">Upload</button>
        </form>
    </section>

    <!-- Display Uploaded Documents as Cards -->
    <section class="files-section">
        <h2>Your Uploaded Documents</h2>
        {% if files_data %}
            <div class="cards-container">
                {% for file in files_data %}
                    <div class="card">
                        <h3>Parties</h3>
                        <p><strong>Licensor:</strong> {{ file.parties.licensor }}</p>
                        <p><strong>Licensee:</strong> {{ file.parties.licensee }}</p>

                        <h3>Licensing Terms</h3>
                        <p><strong>Effective Date:</strong> {{ file.licensing_terms.effective_date }}</p>
                        <p><strong>Term Duration:</strong> {{ file.licensing_terms.term_duration }}</p>
                        <p><strong>Scope of Use:</strong> {{ file.licensing_terms.scope_of_use | join(', ') }}</p>
                        <p><strong>License Characteristics:</strong></p>
                        <ul>
                            <li><strong>Exclusivity:</strong> {{ file.licensing_terms.license_characteristics.exclusivity }}</li>
                            <li><strong>Transferability:</strong> {{ file.licensing_terms.license_characteristics.transferability }}</li>
                            <li><strong>Geographical Scope:</strong> {{ file.licensing_terms.license_characteristics.geographical_scope }}</li>
                            <li><strong>User Access:</strong> {{ file.licensing_terms.license_characteristics.user_access }}</li>
                        </ul>

                        <h3>Financial Terms</h3>
                        <p><strong>License Fee:</strong> {{ file.financial_terms.license_fee }}</p>
                        <p><strong>Royalty Terms:</strong> {{ file.financial_terms.royalty_terms }}</p>

                        <h3>Usage Restrictions</h3>
                        <ul>
                            {% for restriction in file.usage_restrictions.prohibited_uses %}
                                <li>{{ restriction }}</li>
                            {% endfor %}
                        </ul>

                        <h3>Intellectual Property</h3>
                        <p><strong>Copyright Ownership:</strong> {{ file.intellectual_property.copyright_ownership }}</p>
                        <p><strong>Attribution Requirements:</strong> {{ file.intellectual_property.attribution_requirements }}</p>

                        <h3>Legal Compliance</h3>
                        <p><strong>Third Party Rights:</strong> {{ file.legal_compliance.third_party_rights }}</p>
                        <p><strong>Indemnification:</strong> {{ file.legal_compliance.indemnification }}</p>
                        <p><strong>Liability Limitations:</strong> {{ file.legal_compliance.liability_limitations }}</p>

                        <h3>Contract Termination</h3>
                        <p><strong>Termination Grounds:</strong></p>
                        <ul>
                            {% for ground in file.contract_termination.termination_grounds %}
                                <li>{{ ground }}</li>
                            {% endfor %}
                        </ul>
                        <p><strong>Dispute Resolution:</strong></p>
                        <ul>
                            <li><strong>Governing Law:</strong> {{ file.contract_termination.dispute_resolution.governing_law }}</li>
                            <li><strong>Resolution Mechanism:</strong> {{ file.contract_termination.dispute_resolution.resolution_mechanism }}</li>
                        </ul>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No files uploaded yet.</p>
        {% endif %}
    </section>
</div>
{% endblock %}
